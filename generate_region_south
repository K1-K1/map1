#!/usr/bin/env bash
LC_NUMERIC=C
LC_COLLATE=C

ZOOM=8

case "$1" in

AixEnProvance)
	X1=5.3899664
	Y1=43.4983928
	X2=5.5019064
	Y2=43.5551797
	;;
Ancona)
	X1=13.4687900
	Y1=43.5744628
	X2=13.5503067
	Y2=43.6321778	
	;;
Avignon)
	X1=4.7336714
	Y1=43.9100953
	X2=4.9086669
	Y2=43.9772772
	;;
BanjaLuka)
	X1=17.1449153
	Y1=44.7443928
	X2=17.2668561
	Y2=44.8680267		
	;;
Beograd)
	X1=20.2027875
	Y1=44.6776464
	X2=20.5733333
	Y2=44.9210217		
	;;
Bologna)
	X1=11.2477906
	Y1=44.4428756 
	X2=11.4395469
	Y2=44.5548400		
	;;
Cremona)
	X1=9.9779939
	Y1=45.1141508 
	X2=10.0721544
	Y2=45.1578569 		
	;;
Ferrara)
	X1=11.5406747
	Y1=44.7895367 
	X2=11.6820253
	Y2=44.8734861 		
	;;
Firenze)
	X1=11.0176403
	Y1=43.7292008 
	X2=11.3280033
	Y2=43.9037489 		
	;;
Geneve)
	X1=5.9344767
	Y1=46.1138853 
	X2=6.3950344
	Y2=46.3229442 		
	;;
Genova)
	X1=8.7364881
	Y1=44.3783169
	X2=9.0338958
	Y2=44.4513447		
	;;
Grenobla)
	X1=5.6211681
	Y1=45.0872528 
	X2=5.8676961
	Y2=45.2353444 		
	;;
Ljubljana)
	X1=14.3659069
	Y1=45.9758458 
	X2=14.6480519
	Y2=46.1572258 		
	;;
Mantova)
	X1=10.7351125
	Y1=45.1381767 
	X2=10.8134622
	Y2=45.2090153 		
	;;
Marseille)
	X1=5.2798811
	Y1=43.2024981 
	X2=5.5790608
	Y2=43.4087244 
	;;
Milano)
	X1=9.0520906
	Y1=45.3919489
	X2=9.3198767
	Y2=45.5741556
	;;
Modena)
	X1=10.8547103
	Y1=44.6017233 
	X2=10.9834864
	Y2=44.6717244 		
	;;
Nice)
	X1=7.1618081
	Y1=43.6923794 
	X2=7.5786125
	Y2=43.7893906 		
	;;
Nimes)
	X1=4.2851103
	Y1=43.7850619 
	X2=4.4537817
	Y2=43.8693964 		
	;;
NoviSad)
	X1=19.7270872
	Y1=45.1716361 
	X2=19.9307764
	Y2=45.3179603 
	;;
Livorno)
	X1=10.2782494
	Y1=43.4868042 
	X2=10.3669908
	Y2=43.5793867 
	;;
Lyon)
	X1=4.6487811
	Y1=45.6213133 
	X2=5.0792853
	Y2=45.8247772
	;;
Padova)
	X1=11.7776139
	Y1=45.3306886 
	X2=12.0115458
	Y2=45.4660417 		
	;;	
Parma)
	X1=10.2733614
	Y1=44.7646328 
	X2=10.3862914
	Y2=44.8253953 		
	;;
Perugia)
	X1=12.3249808
	Y1=43.0547469 
	X2=12.4380458
	Y2=43.1247686 		
	;;
Pisa)
	X1=10.3384797
	Y1=43.6627033 
	X2=10.5447289
	Y2=43.7431914 		
	;;
Podgorica)
	X1=19.1983422
	Y1=42.4042836 
	X2=19.3198850
	Y2=42.4819903		
	;;
Pristina)
	X1=21.1306856
	Y1=42.6332883 
	X2=21.1928219
	Y2=42.6994375 		
	;;
Rijeka)
	X1=14.2844767
	Y1=45.2892653 
	X2=14.5135792
	Y2=45.4003972 		
	;;
Roma)
	X1=11.9988853
	Y1=41.7275075 
	X2=12.7138614
	Y2=41.9951900 		
	;;
SanMarino)
	X1=12.3967719
	Y1=43.8932331 
	X2=12.5184872
	Y2=43.9891989 		
	;;
Sarajevo)
	X1=18.2576692
	Y1=43.7711169 
	X2=18.4741872
	Y2=43.9129081 		
	;;
Split)
	X1=16.2971558
	Y1=43.4931744 
	X2=16.5189858
	Y2=43.5762956 		
	;;
Trento)
	X1=11.0671733
	Y1=46.0270881 
	X2=11.1786483
	Y2=46.1177756 		
	;;
Trieste)
	X1=13.7273336
	Y1=45.5943144 
	X2=13.8659956
	Y2=45.6844475 		
	;;
Trogir)
	X1=16.2196839
	Y1=43.4909414 
	X2=16.2775181
	Y2=43.5275897 		
	;;
Torino)
	X1=7.5000803
	Y1=44.9880556 
	X2=7.7850258
	Y2=45.1424389 		
	;;
Toulon)
	X1=5.7177483
	Y1=43.0603761 
	X2=6.0498628
	Y2=43.1577900 		
	;;
Venezia)
	X1=12.1853183
	Y1=45.3916567 
	X2=12.3954781
	Y2=45.5237764 		
	;;
Verona)
	X1=10.9193375	
	Y1=45.3711747 
	X2=11.0756042
	Y2=45.4696764 		
	;;
Zadar)
	X1=15.1904936
	Y1=44.0589311 
	X2=15.3068367
	Y2=44.1582931 		
	;;
Zagreb)
	X1=15.7657056
	Y1=45.6826858 
	X2=16.1957836
	Y2=45.9046989 		
	;;

*)
	echo "========="
	echo $1
	echo "========="
	X1=$1
	Y1=$2
	X2=$3
	Y2=$4
	;;
esac

Z1=16
Z2=17

x1=$(./extract-aster/lon2x $X1 $ZOOM)
y1=$(./extract-aster/lat2y $Y1 $ZOOM)
x2=$(./extract-aster/lon2x $X2 $ZOOM)
y2=$(./extract-aster/lat2y $Y2 $ZOOM)

for x in $(eval echo {$x1..$x2}); do		
	for y in $(eval echo {$y1..$y2}); do
		echo "./get-data $x $y" >> _queue
		for z in $(eval echo {$Z1..$Z2}); do			
			echo "./compile_stylesheets -sc eu -z $z -t $x.$y" >> _queue
			echo "./generate_metatile $x $y $z $X1,$Y1,$X2,$Y2" >> _queue
			
		done;
	done;
done;
