#!/usr/bin/env bash
LC_NUMERIC=C
LC_COLLATE=C

ZOOM=8

case "$1" in

Bayreuth)
	X1=11.5173172
	Y1=49.9138661
	X2=11.6412233
	Y2=49.9689394
	;;	
Berlin)
	X1=12.8286892
	Y1=52.2166983
	X2=13.8533528
	Y2=52.7846758	
	;;
Bratislava)
	X1=17.0120125
	Y1=48.0879025
	X2=17.2319778
	Y2=48.2215306
	;;	
Brno)
	X1=16.4917508
	Y1=49.0998764
	X2=16.7491714
	Y2=49.2871481
	;;	
Budapest)
	X1=18.7687303
	Y1=47.2617247
	X2=19.3781867
	Y2=47.6854589
	;;
CeskeBudejovice)
	X1=14.4232381
	Y1=48.9409397
	X2=14.5407275
	Y2=49.0115142
	;;
Czechstlpwa)
	X1=18.8728289
	Y1=50.6971675
	X2=19.2417328
	Y2=50.9507128
	;;	
Debrecen)
	X1=21.5540097
	Y1=47.4694569
	X2=21.7102956
	Y2=47.5822544
	;;	
Dresden)
	X1=13.4331906
	Y1=50.9282806
	X2=13.9891425
	Y2=51.1840231		
	;;
Graz)
	X1=15.2996272
	Y1=46.9489792
	X2=15.5626442
	Y2=47.1394461
	;;
GorzowWielkopolski)
	X1=15.1574850
	Y1=52.6844469
	X2=15.3171667
	Y2=52.7739461
	;;	
Gyor)
	X1=17.5865392
	Y1=47.5375194
	X2=17.8017011
	Y2=47.7360831
	;;	
Innsbruck)
	X1=11.1982636
	Y1=47.2291589
	X2=11.5563489
	Y2=47.2938533
	;;
JeleniaGora)
	X1=15.6298622
	Y1=50.8250844
	X2=15.8118964
	Y2=50.9378636
	;;	
Magdeburg)
	X1=11.5266464
	Y1=51.9873822
	X2=11.8289606
	Y2=52.1826336
	;;	
Munchen)
	X1=11.2316114
	Y1=48.0031039
	X2=11.8946967
	Y2=48.3161353	
	;;
Kosice)
	X1=21.1568481
	Y1=48.6391219
	X2=21.3582694
	Y2=48.7906972
	;;	
Leipzig)
	X1=12.1799919
	Y1=51.2484586
	X2=12.6138642
	Y2=51.4137986	
	;;
Liberec)
	X1=14.9891000
	Y1=50.6913269
	X2=15.2038675
	Y2=50.8083403
	;;	
Linz)
	X1=14.1482033
	Y1=48.1956133
	X2=14.4143683
	Y2=48.3540217
	;;
Lodz)
	X1=19.2498981
	Y1=51.5689494
	X2=19.6524036
	Y2=51.8888519
	;;
Halle)
	X1=11.8449289
	Y1=51.4069067
	X2=12.0635250
	Y2=51.5336247
	;;	
HradecKralove)
	X1=15.7674542
	Y1=50.1689708
	X2=15.8840711
	Y2=50.2457803
	;;	
Chemnitz)
	X1=12.7846344
	Y1=50.7584322
	X2=13.0027931
	Y2=50.8716303
	;;
Krakow)
	X1=19.8026342
	Y1=49.8704081
	X2=20.2604008
	Y2=50.1420236
	;;
Olomouc)
	X1=17.2107233
	Y1=49.6184789
	X2=17.3111831
	Y2=49.5598058
	;;	
Opole)
	X1=17.8068192
	Y1=50.5739839
	X2=18.0452608
	Y2=50.7296581
	;;	
Ostrava)
	X1=18.1477011
	Y1=49.7412428
	X2=18.4814419
	Y2=49.9108689
	;;
Pardubice)
	X1=15.7243819
	Y1=50.0145222
	X2=15.8307622
	Y2=50.0687681
	;;		
Pecs)
	X1=18.1371806
	Y1=46.0005439
	X2=18.3161269
	Y2=46.1320436
	;;
Plzen)
	X1=13.3055647
	Y1=49.7806111
	X2=13.4667206
	Y2=49.6884447
	;;
Poznan)
	X1=16.7086742
	Y1=52.2637439
	X2=17.1148114
	Y2=52.5309994
	;;	
Praha)
	X1=14.0457189
	Y1=49.9153481
	X2=14.7530672
	Y2=50.2518792
	;;
Regensburg)
	X1=12.0031778
	Y1=48.9586783
	X2=12.2301303
	Y2=49.0831378
	;;
Salzburg)
	X1=12.8959625
	Y1=47.7437414
	X2=13.1345444
	Y2=47.8588206
	;;
Szeged)
	X1=20.0227264
	Y1=46.1924200
	X2=20.2172750
	Y2=46.3509408
	;;
UstiNadLabem)
	X1=13.9768778
	Y1=50.6167806
	X2=14.1157033
	Y2=50.6982386
	;;
Walbrzych)
	X1=16.1785397
	Y1=50.7138611
	X2=16.3783772
	Y2=50.8786494
	;;	
Warszawa)
	X1=20.5847333
	Y1=51.9628450
	X2=21.3810775
	Y2=52.4862056
	;;	
Wien)
	X1=16.0393406
	Y1=47.9798989
	X2=16.5943506
	Y2=48.4002708
	;;
Wroclaw)
	X1=16.8485983
	Y1=51.0113653
	X2=17.1768536
	Y2=51.2000539
	;;	
*)
	echo "========="
	echo $1
	echo "========="
	X1=$1
	Y1=$2
	X2=$3
	Y2=$4
	;;
esac

Z1=16
Z2=17

x1=$(./extract-aster/lon2x $X1 $ZOOM)
y1=$(./extract-aster/lat2y $Y1 $ZOOM)
x2=$(./extract-aster/lon2x $X2 $ZOOM)
y2=$(./extract-aster/lat2y $Y2 $ZOOM)

for x in $(eval echo {$x1..$x2}); do		
	for y in $(eval echo {$y1..$y2}); do
		echo "./get-data $x $y" >> _queue
		for z in $(eval echo {$Z1..$Z2}); do			
			echo "./compile_stylesheets -sc eu -z $z -t $x.$y" >> _queue
			echo "./generate_metatile $x $y $z $X1,$Y1,$X2,$Y2" >> _queue
			
		done;
	done;
done;
